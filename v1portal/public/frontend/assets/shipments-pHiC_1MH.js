var j=Object.defineProperty,E=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var V=(l,e,a)=>e in l?j(l,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[e]=a,D=(l,e)=>{for(var a in e||(e={}))q.call(e,a)&&V(l,a,e[a]);if(S)for(var a of S(e))A.call(e,a)&&V(l,a,e[a]);return l},T=(l,e)=>E(l,O(e));var L=(l,e,a)=>new Promise((t,g)=>{var b=n=>{try{m(a.next(n))}catch(u){g(u)}},p=n=>{try{m(a.throw(n))}catch(u){g(u)}},m=n=>n.done?t(n.value):Promise.resolve(n.value).then(b,p);m((a=a.apply(l,e)).next())});import{L as G}from"./LeftSidebar-Bv_zMSK0.js";import{R as H}from"./RefreshButton-DjaifwEB.js";import{_ as J,P as K}from"./ListView-Bci8aoEt.js";import{_ as Q,b as W,r,c as X,d as Y,o as Z,e as w,f as d,n as B,g as i,w as N,u as $,h as c,i as C,j as ee,m as te,t as z}from"./index-59s5irdc.js";import{_ as ae}from"./Badge.vue_vue_type_script_setup_true_lang-DhqV6aGv.js";import{D as oe}from"./DatePicker-Cgkimws6.js";import{_ as se,a as le}from"./FormControl.vue_vue_type_script_setup_true_lang-DN1lN8V8.js";import"./Avatar.vue_vue_type_script_setup_true_lang-Dt0vLd5E.js";import"./index-CFFX3Mdj.js";import"./index-Cd14MKN6.js";const ne={components:{LeftSidebar:G,ListView:J,Pagination:K,TextInput:se,FormControl:le,Badge:ae,DatePicker:oe,RefreshButton:H,Button:W},setup(){const l=r(!1),e=r([]),a=r([]),t=r(!1),g=r([{label:"Name",key:"name"},{label:"Status",key:"status"},{label:"Item",key:"item_name"},{label:"Date",key:"posting_date"},{label:"Total",key:"grand_total"}]),b=X({url:"v1portal.v1portal.api.api.get_shipments",method:"get"}),p=()=>L(this,null,function*(){try{t.value=!0;const s=yield b.fetch();a.value=s.map(v=>T(D({},v),{total:String(v.total),item_name:v.items.map(R=>R.item_name).join(", ")||"No items"}))}catch(s){console.error("Error fetching data:",s)}finally{t.value=!1}}),m=()=>{p()},n=()=>{l.value=!l.value},u=$(),y=s=>{s&&s.name?u.push({name:"ShipmentDetails",params:{id:s.name}}):console.error("Row data is invalid:",s)},x=s=>{e.value=s},k=()=>{h.value="",f.value="",o.value="",_.value=""},h=r(""),f=r(""),o=r(""),_=r(""),P=Y(()=>a.value.filter(s=>{const v=s.name.toLowerCase().includes(h.value.toLowerCase()),R=s.status.toLowerCase()===f.value.toLowerCase()||!f.value,U=s.grand_total.toString().replace(/[.,]/g,"").includes(o.value.toString().replace(/[.,]/g,""))||!o.value,F=_.value.split("-").reverse().join("-"),M=s.posting_date&&s.posting_date.includes(F);return v&&R&&U&&M})),I=s=>{switch(s){case"Draft":return{theme:"red"};case"Completed":return{theme:"blue"};case"Cancelled":return{theme:"green"};case"Closed":return{theme:"orange"};default:return{theme:"gray"}}};return Z(()=>{p()}),{isSidebarCollapsed:l,rows:a,columns:g,toggleSidebar:n,OpenClick:y,updatePaginatedRows:x,paginatedRows:e,filterName:h,filterStatus:f,filterTotal:o,filteredRows:P,filterDate:_,resetFilters:k,getStatusTheme:I,isLoading:t,reload:m}}},ie={class:"h-[calc(100vh)] overflow-hidden flex flex-col"},re={class:"main-content"},de={class:"fiter flex gap-2 flex items-center justify-between px-1 py-4 -mt-3"},ce={class:"flex ml-auto"},me={key:0},ue={key:1},pe={class:"text-black text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}},fe={key:2},_e={class:"font-small text-gray-700 text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}};function ge(l,e,a,t,g,b){const p=c("LeftSidebar"),m=c("TextInput"),n=c("FormControl"),u=c("DatePicker"),y=c("Button"),x=c("RefreshButton"),k=c("Badge"),h=c("ListView"),f=c("pagination");return C(),w("div",ie,[d("div",{class:B(["head-layout",{collapsed:t.isSidebarCollapsed}])},e[4]||(e[4]=[d("div",{class:"head-content"},[d("header",{class:"border-b bg-white px-5 py-2.5 sm:px-5"},"Shipments")],-1)]),2),d("div",{class:B(["layout",{collapsed:t.isSidebarCollapsed}])},[i(p,{class:"z-[8]",isCollapsed:t.isSidebarCollapsed,onToggle:t.toggleSidebar},null,8,["isCollapsed","onToggle"]),d("div",re,[d("div",de,[i(m,{type:"search",size:"sm",variant:"subtle",placeholder:"Name",modelValue:t.filterName,"onUpdate:modelValue":e[0]||(e[0]=o=>t.filterName=o),class:"w-48"},null,8,["modelValue"]),i(n,{type:"select",options:[{},{label:"Draft",value:"Draft"},{label:"To Bill",value:"To Bill"},{label:"Return Issued",value:"Return Issued"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"},{label:"Closed",value:"Closed"}],size:"sm",variant:"subtle",placeholder:"Status",modelValue:t.filterStatus,"onUpdate:modelValue":e[1]||(e[1]=o=>t.filterStatus=o),class:"w-48"},null,8,["modelValue"]),i(m,{type:"search",size:"sm",variant:"subtle",placeholder:"Total",modelValue:t.filterTotal,"onUpdate:modelValue":e[2]||(e[2]=o=>t.filterTotal=o),class:"w-48"},null,8,["modelValue"]),i(u,{class:"border-none w-48",size:"md",variant:"subtle",placeholder:"Date",modelValue:t.filterDate,"onUpdate:modelValue":e[3]||(e[3]=o=>t.filterDate=o)},null,8,["modelValue"]),d("div",ce,[i(y,{variant:"subtle",theme:"gray",size:"sm",onClick:t.resetFilters},{default:N(()=>e[5]||(e[5]=[ee(" Reset")])),_:1},8,["onClick"])]),i(x,{onRefresh:t.reload,isLoading:t.isLoading},null,8,["onRefresh","isLoading"])]),i(h,{class:"h-full",columns:t.columns,rows:t.paginatedRows,options:{getRowRoute:o=>({name:"ShipmentDetails",params:{id:o.name}}),selectable:!0,showTooltip:!0,resizeColumn:!0,emptyState:{title:"No records found"}},"row-key":"name",onRowClick:t.OpenClick},{cell:N(({item:o,column:_})=>[_.key==="status"?(C(),w("div",me,[i(k,te(t.getStatusTheme(o),{size:"sm",label:o}),null,16,["label"])])):_.key==="name"?(C(),w("div",ue,[d("span",pe,z(o),1)])):(C(),w("div",fe,[d("span",_e,z(o),1)]))]),_:1},8,["columns","rows","options","onRowClick"]),i(f,{rows:t.filteredRows,"onUpdate:paginatedRows":t.updatePaginatedRows},null,8,["rows","onUpdate:paginatedRows"])])],2)])}const De=Q(ne,[["render",ge],["__scopeId","data-v-2e08484c"]]);export{De as default};
