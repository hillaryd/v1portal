var g=(_,s,a)=>new Promise((e,n)=>{var u=o=>{try{i(a.next(o))}catch(c){n(c)}},r=o=>{try{i(a.throw(o))}catch(c){n(c)}},i=o=>o.done?e(o.value):Promise.resolve(o.value).then(u,r);i((a=a.apply(_,s)).next())});import{L as C}from"./LeftSidebar-Bv_zMSK0.js";import{_ as x,b as S,r as l,o as w,e as E,f as t,g as m,n as h,t as T,u as k,c as B,h as b,i as j}from"./index-59s5irdc.js";import{_ as I}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-C_ouJCLj.js";import{a as O}from"./FormControl.vue_vue_type_script_setup_true_lang-DN1lN8V8.js";import{T as z}from"./TextEditor-Bn_i_fGS.js";import"./Avatar.vue_vue_type_script_setup_true_lang-Dt0vLd5E.js";import"./index-CFFX3Mdj.js";const L={components:{LeftSidebar:C,Breadcrumbs:I,Button:S,FormControl:O,TextEditor:z},setup(){const _=k(),s=l(!1),a=l(""),e=l(""),n=l({description:""}),u=l(""),r=l("");l([]);const i=l([{label:"Issues",route:{name:"issue"}},{label:"Create Issue",route:{}}]),o=[{label:"Open",value:"Open"},{label:"Closed",value:"Closed"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"}],c=()=>{a.value="",e.value="",n.value.description="",r.value="",u.value=""},f=()=>g(this,null,function*(){const v={subject:a.value,status:e.value||"Open",priority:u.value||"Medium",description:n.value.description};r.value!=="Administrator"&&(v.customer=r.value);try{if(!(yield fetch("/api/resource/Issue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)})).ok)throw new Error("Error creating issue");_.push({name:"issue"})}catch(d){console.error("Error creating issue:",d)}}),p=()=>g(this,null,function*(){const v=B({url:"v1portal.v1portal.api.api.getcustomer",method:"get",cache:["true"],auto:["true"]});try{const d=yield v.fetch();d&&(r.value=d)}catch(d){console.error("Error fetching customer data:",d)}}),y=()=>{s.value=!s.value};return w(()=>g(this,null,function*(){yield p()})),{isSidebarCollapsed:s,subject:a,status:e,newTicket:n,priority:u,customer:r,breadcrumbsList:i,statusOptions:o,cancelEditing:c,createIssue:f,toggleSidebar:y}}},R={class:"head-content"},V={class:"border-b bg-white px-5 py-3.5 pb-[2.625rem] sm:px-5 mb-12"},D={class:"main-content p-5",style:{"padding-left":"150px","padding-right":"150px"}},N={class:"bg-white border rounded-lg p-6 space-y-6 pb-[2.625rem]"},F={class:"float-left mb-1 text-xl font-bold text-gray-800 -mt-2",style:{"font-size":"1.35rem"}},M={class:"text-9xl font-bold text-gray-600",style:{"font-size":"1rem"}},H={class:"p-2"},A={class:"float-right flex gap-4 button-container"};function J(_,s,a,e,n,u){const r=b("Breadcrumbs"),i=b("LeftSidebar"),o=b("FormControl"),c=b("TextEditor"),f=b("Button");return j(),E("div",null,[t("div",{class:h(["head-layout",{collapsed:e.isSidebarCollapsed}])},[t("div",R,[t("header",V,[m(r,{items:e.breadcrumbsList,class:"float-left"},null,8,["items"])])])],2),t("div",{class:h(["layout",{collapsed:e.isSidebarCollapsed}])},[m(i,{class:"z-[8]",isCollapsed:e.isSidebarCollapsed,onToggle:e.toggleSidebar},null,8,["isCollapsed","onToggle"]),t("div",D,[t("div",N,[t("div",F,[s[2]||(s[2]=t("p",null,"Issue",-1)),t("p",M,T(e.subject),1)]),s[3]||(s[3]=t("div",{class:"border-b pb-7"},null,-1)),t("div",H,[m(o,{type:"text",size:"md",variant:"subtle",placeholder:"subject",label:"Subject",modelValue:e.subject,"onUpdate:modelValue":s[0]||(s[0]=p=>e.subject=p),class:"mb-5"},null,8,["modelValue"]),m(c,{fixedMenu:!0,class:"custom-editor",placeholder:"Describe your problem...",onChange:s[1]||(s[1]=p=>e.newTicket.description=p)}),t("div",A,[m(f,{variant:"subtle",theme:"gray",size:"md",label:"Discard",onClick:e.cancelEditing},null,8,["onClick"]),m(f,{variant:"solid",theme:"gray",size:"md",label:"Submit",onClick:e.createIssue},null,8,["onClick"])])])])])],2)])}const Y=x(L,[["render",J],["__scopeId","data-v-21a24db6"]]);export{Y as default};
