var P=Object.defineProperty;var k=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var S=(a,e,t)=>e in a?P(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,L=(a,e)=>{for(var t in e||(e={}))F.call(e,t)&&S(a,t,e[t]);if(k)for(var t of k(e))U.call(e,t)&&S(a,t,e[t]);return a};var B=(a,e,t)=>new Promise((s,_)=>{var h=i=>{try{u(t.next(i))}catch(d){_(d)}},m=i=>{try{u(t.throw(i))}catch(d){_(d)}},u=i=>i.done?s(i.value):Promise.resolve(i.value).then(h,m);u((t=t.apply(a,e)).next())});import{L as j}from"./LeftSidebar-Bv_zMSK0.js";import{_ as D,P as H}from"./ListView-Bci8aoEt.js";import{R as M}from"./RefreshButton-DjaifwEB.js";import{_ as E,b as q,r as f,c as A,d as G,o as J,e as g,f as n,g as r,w as x,n as V,u as K,h as c,i as v,j as N,m as Q,t as T}from"./index-59s5irdc.js";import{_ as W}from"./Badge.vue_vue_type_script_setup_true_lang-DhqV6aGv.js";import{_ as X,a as Y}from"./FormControl.vue_vue_type_script_setup_true_lang-DN1lN8V8.js";import"./Avatar.vue_vue_type_script_setup_true_lang-Dt0vLd5E.js";import"./index-CFFX3Mdj.js";import"./index-Cd14MKN6.js";const Z={components:{LeftSidebar:j,ListView:D,Pagination:H,TextInput:X,FormControl:Y,Badge:W,RefreshButton:M,Button:q},setup(){const a=f(!1),e=f([]),t=f(!1),s=f([]),_=f([{label:"Name",key:"name"},{label:"Status",key:"status"},{label:"Subject",key:"subject"},{label:"Raised By(email)",key:"owner"},{label:"Priority",key:"priority"}]),h=A({url:"v1portal.v1portal.api.api.get_issues",method:"get"}),m=()=>B(this,null,function*(){t.value=!0;try{const o=yield h.fetch();e.value=o.map(R=>L({},R))}catch(o){console.error("Error fetching data:",o)}finally{t.value=!1}}),u=()=>{m()},i=()=>{a.value=!a.value},d=K(),w=()=>{d.push({name:"issueNew"})},b=o=>{o&&o.name?d.push({name:"IssueDetails",params:{id:o.name}}):console.error("Row data is invalid:",o)},y=o=>{s.value=o},C=()=>{l.value="",p.value=""},l=f(""),p=f(""),z=G(()=>e.value.filter(o=>{const R=o.name.toLowerCase().includes(l.value.toLowerCase()),O=o.status.toLowerCase()===p.value.toLowerCase()||!p.value;return R&&O})),I=o=>{switch(o){case"Open":return{theme:"red"};case"Replied":return{theme:"blue"};case"Closed":return{theme:"green"};case"On Hold":return{theme:"orange"};default:return{theme:"gray"}}};return J(()=>{m()}),{isSidebarCollapsed:a,rows:e,columns:_,toggleSidebar:i,OpenClick:b,updatePaginatedRows:y,paginatedRows:s,openCreate:w,filterName:l,filterStatus:p,filteredRows:z,resetFilters:C,getStatusTheme:I,reload:u,isLoading:t}}},$={class:"h-[calc(100vh)] overflow-hidden flex flex-col"},ee={class:"head-content"},se={class:"border-b bg-white px-5 py-5.5 sm:px-5"},te={class:"float-right -mt-3"},oe={class:"main-content"},ae={class:"fiter mb-2 flex gap-3"},le={class:"flex ml-auto"},ne={class:"flex gap-2 ml-2"},ie={key:0},re={key:1},de={class:"text-black text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}},ce={key:2},me={class:"font-small text-gray-700 text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}};function ue(a,e,t,s,_,h){const m=c("Button"),u=c("LeftSidebar"),i=c("TextInput"),d=c("FormControl"),w=c("RefreshButton"),b=c("Badge"),y=c("ListView"),C=c("Pagination");return v(),g("div",$,[n("div",{class:V(["head-layout",{collapsed:s.isSidebarCollapsed}])},[n("div",ee,[n("header",se,[e[3]||(e[3]=n("div",{class:"float-left -mt-3"},"Issue",-1)),n("div",te,[r(m,{variant:"solid",theme:"gray",size:"sm",label:"Button",loading:!1,loadingText:null,disabled:!1,link:null,onClick:s.openCreate},{default:x(()=>e[2]||(e[2]=[N(" + Create ")])),_:1},8,["onClick"])])])])],2),n("div",{class:V(["layout",{collapsed:s.isSidebarCollapsed}])},[r(u,{class:"z-[8]",isCollapsed:s.isSidebarCollapsed,onToggle:s.toggleSidebar},null,8,["isCollapsed","onToggle"]),n("div",oe,[n("div",ae,[r(i,{type:"search",size:"sm",variant:"subtle",placeholder:"Name",modelValue:s.filterName,"onUpdate:modelValue":e[0]||(e[0]=l=>s.filterName=l),class:"w-48"},null,8,["modelValue"]),r(d,{type:"select",options:[{},{label:"Open",value:"Open"},{label:"On Hold",value:"On Hold"},{label:"Replied",value:"Replied"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}],size:"sm",variant:"subtle",placeholder:"Status",modelValue:s.filterStatus,"onUpdate:modelValue":e[1]||(e[1]=l=>s.filterStatus=l),class:"w-48"},null,8,["modelValue"]),n("div",le,[r(m,{variant:"subtle",theme:"gray",size:"sm",onClick:s.resetFilters},{default:x(()=>e[4]||(e[4]=[N(" Reset")])),_:1},8,["onClick"]),n("div",ne,[r(w,{onRefresh:s.reload,isLoading:s.isLoading},null,8,["onRefresh","isLoading"])])])]),r(y,{class:"h-full",columns:s.columns,rows:s.paginatedRows,options:{getRowRoute:l=>({name:"IssueDetails",params:{id:l.name}}),selectable:!0,showTooltip:!0,resizeColumn:!0,emptyState:{title:"No records found"}},"row-key":"name",onRowClick:s.OpenClick},{cell:x(({item:l,column:p})=>[p.key==="status"?(v(),g("div",ie,[r(b,Q(s.getStatusTheme(l),{size:"sm",label:l}),null,16,["label"])])):p.key==="name"?(v(),g("div",re,[n("span",de,T(l),1)])):(v(),g("div",ce,[n("span",me,T(l),1)]))]),_:1},8,["columns","rows","options","onRowClick"]),r(C,{rows:s.filteredRows,"onUpdate:paginatedRows":s.updatePaginatedRows},null,8,["rows","onUpdate:paginatedRows"])])],2)])}const Re=E(Z,[["render",ue],["__scopeId","data-v-56c32b85"]]);export{Re as default};
