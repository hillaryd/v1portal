var M=Object.defineProperty,j=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var D=(s,e,t)=>e in s?M(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,P=(s,e)=>{for(var t in e||(e={}))q.call(e,t)&&D(s,t,e[t]);if(S)for(var t of S(e))A.call(e,t)&&D(s,t,e[t]);return s},V=(s,e)=>j(s,E(e));var T=(s,e,t)=>new Promise((a,_)=>{var h=n=>{try{u(t.next(n))}catch(m){_(m)}},p=n=>{try{u(t.throw(n))}catch(m){_(m)}},u=n=>n.done?a(n.value):Promise.resolve(n.value).then(h,p);u((t=t.apply(s,e)).next())});import{L as G}from"./LeftSidebar-Bv_zMSK0.js";import{_ as H,P as J}from"./ListView-Bci8aoEt.js";import{R as K}from"./RefreshButton-DjaifwEB.js";import{_ as Q,b as W,r as d,c as X,d as Y,o as Z,e as w,f as i,n as L,g as r,w as I,u as $,h as c,i as y,j as ee,m as ae,t as B}from"./index-59s5irdc.js";import{_ as te}from"./Badge.vue_vue_type_script_setup_true_lang-DhqV6aGv.js";import{D as oe}from"./DatePicker-Cgkimws6.js";import{_ as le,a as se}from"./FormControl.vue_vue_type_script_setup_true_lang-DN1lN8V8.js";import"./Avatar.vue_vue_type_script_setup_true_lang-Dt0vLd5E.js";import"./index-CFFX3Mdj.js";import"./index-Cd14MKN6.js";const ne={components:{LeftSidebar:G,ListView:H,Pagination:J,TextInput:le,RefreshButton:K,FormControl:se,Badge:te,DatePicker:oe,Button:W},setup(){const s=d(!1),e=d([]),t=d(!1),a=d([]),_=d([{label:"Name",key:"name"},{label:"Status",key:"status"},{label:"Item",key:"item_name"},{label:"Date",key:"posting_date"},{label:"Total",key:"grand_total"}]),h=X({url:"v1portal.v1portal.api.api.get_salesinvoice",method:"get"}),p=()=>T(this,null,function*(){try{t.value=!0;const l=yield h.fetch();e.value=l.map(b=>V(P({},b),{total:String(b.total),item_name:b.items.map(R=>R.item_name).join(", ")||"No items"}))}catch(l){console.error("Error fetching data:",l)}finally{t.value=!1}}),u=()=>{p()},n=()=>{s.value=!s.value},m=$(),C=l=>{l&&l.name&&m.push({name:"InvoicesDetail",params:{id:l.name}})},x=l=>{a.value=l},k=()=>{g.value="",f.value="",o.value="",v.value=""},g=d(""),f=d(""),o=d(""),v=d(""),N=Y(()=>e.value.filter(l=>{const b=l.name.toLowerCase().includes(g.value.toLowerCase()),R=l.status.toLowerCase()===f.value.toLowerCase()||!f.value,z=l.grand_total.toString().replace(/[.,]/g,"").includes(o.value.toString().replace(/[.,]/g,""))||!o.value,O=v.value.split("-").reverse().join("-"),F=l.posting_date&&l.posting_date.includes(O);return b&&R&&z&&F})),U=l=>{switch(l){case"Draft":return{theme:"red"};case"Overdue":return{theme:"blue"};case"Cancelled":return{theme:"green"};case"Return":return{theme:"orange"};default:return{theme:"gray"}}};return Z(()=>{p()}),{isSidebarCollapsed:s,rows:e,columns:_,toggleSidebar:n,OpenClick:C,updatePaginatedRows:x,paginatedRows:a,filterName:g,filterStatus:f,filterTotal:o,filteredRows:N,filterDate:v,resetFilters:k,getStatusTheme:U,reload:u,isLoading:t}}},ie={class:"h-[calc(100vh)] overflow-hidden flex flex-col"},re={class:"main-content overflow-hidden flex flex-col"},de={class:"filter mb-2 flex gap-3"},ce={class:"flex ml-auto"},ue={class:"refers ml-3"},me={key:0},pe={key:1},fe={class:"text-black text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}},ve={key:2},_e={class:"font-small text-gray-700 text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}};function ge(s,e,t,a,_,h){const p=c("LeftSidebar"),u=c("TextInput"),n=c("FormControl"),m=c("DatePicker"),C=c("Button"),x=c("RefreshButton"),k=c("Badge"),g=c("ListView"),f=c("Pagination");return y(),w("div",ie,[i("div",{class:L(["head-layout",{collapsed:a.isSidebarCollapsed}])},e[4]||(e[4]=[i("div",{class:"head-content"},[i("header",{class:"border-b bg-white px-5 py-2.5 sm:px-5"}," Invoice ")],-1)]),2),i("div",{class:L(["layout",{collapsed:a.isSidebarCollapsed}])},[r(p,{class:"z-[8]",isCollapsed:a.isSidebarCollapsed,onToggle:a.toggleSidebar},null,8,["isCollapsed","onToggle"]),i("div",re,[i("div",de,[r(u,{type:"search",size:"sm",variant:"subtle",placeholder:"Name",modelValue:a.filterName,"onUpdate:modelValue":e[0]||(e[0]=o=>a.filterName=o),class:"w-48"},null,8,["modelValue"]),r(n,{type:"select",options:[{},{label:"Draft",value:"Draft"},{label:"Return",value:"Return"},{label:"Credit Note Issued",value:"Credit Note Issued"},{label:"Partly Paid",value:"Partly Paid"},{label:"Paid",value:"Paid"},{label:"Submitted",value:"Submitted"},{label:"Unpaid",value:"Unpaid"},{label:"Unpaid and Discounted",value:"Unpaid and Discounted"},{label:"Partly Paid and Discounted",value:"Partly Paid and Discounted"},{label:"Cancelled",value:"Cancelled"},{label:"Overdue",value:"Overdue"},{label:"Overdue and Discounted",value:"Overdue and Discounted"},{label:"Internal Transfer",value:"Internal Transfer"}],size:"sm",variant:"subtle",placeholder:"Status",modelValue:a.filterStatus,"onUpdate:modelValue":e[1]||(e[1]=o=>a.filterStatus=o),class:"w-48"},null,8,["modelValue"]),r(u,{type:"search",size:"sm",variant:"subtle",placeholder:"Total",modelValue:a.filterTotal,"onUpdate:modelValue":e[2]||(e[2]=o=>a.filterTotal=o),class:"w-48"},null,8,["modelValue"]),r(m,{class:"border-none w-48",size:"md",variant:"subtle",placeholder:"Date",modelValue:a.filterDate,"onUpdate:modelValue":e[3]||(e[3]=o=>a.filterDate=o)},null,8,["modelValue"]),i("div",ce,[r(C,{variant:"subtle",theme:"gray",size:"sm",onClick:a.resetFilters},{default:I(()=>e[5]||(e[5]=[ee(" Reset")])),_:1},8,["onClick"]),i("div",ue,[r(x,{onRefresh:a.reload,isLoading:a.isLoading},null,8,["onRefresh","isLoading"])])])]),r(g,{class:"h-full",columns:a.columns,rows:a.paginatedRows,options:{getRowRoute:o=>({name:"InvoiceDetail",params:{id:o.name}}),selectable:!0,showTooltip:!0,resizeColumn:!0,emptyState:{title:"No records found"}},"row-key":"name",onRowClick:a.OpenClick},{cell:I(({item:o,column:v})=>[v.key==="status"?(y(),w("div",me,[r(k,ae(a.getStatusTheme(o),{size:"sm",label:o}),null,16,["label"])])):v.key==="name"?(y(),w("div",pe,[i("span",fe,B(o),1)])):(y(),w("div",ve,[i("span",_e,B(o),1)]))]),_:1},8,["columns","rows","options","onRowClick"]),r(f,{rows:a.filteredRows,"onUpdate:paginatedRows":a.updatePaginatedRows},null,8,["rows","onUpdate:paginatedRows"])])],2)])}const Ve=Q(ne,[["render",ge],["__scopeId","data-v-61a2f31b"]]);export{Ve as default};
